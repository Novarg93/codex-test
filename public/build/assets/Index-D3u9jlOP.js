import{l as j,p as g,g as s,o,a as n,w as d,b as u,d as i,f as c,F as f,q as h,i as _,t as l,m as x,s as I}from"./app-KhPXK_eo.js";import{_ as V,u as B}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-BTbjbBgZ.js";import{_ as F,a as D,b as k,c as L,d as P,e as Q}from"./BreadcrumbSeparator-jAW-ODu1.js";import{_ as U}from"./SeoHead.vue_vue_type_script_setup_true_lang-Dh5GiDDG.js";const Y={class:"w-[90%] 2xl:w-[75%] mx-auto py-8 md:py-12 lg:py-16"},A={key:0,class:"space-y-4"},E=["src"],G={class:"flex-1 min-h-20"},H={class:"font-medium"},O={key:0,class:"text-sm text-muted-foreground"},R={class:"list-disc pl-5 space-y-0.5"},T={key:0,class:"text-[10px] mr-2 px-1.5 py-0.5 rounded bg-amber-100 text-amber-900 border border-amber-200"},W={class:"font-medium"},z={key:1,class:"ml-1"},J={key:1,class:"text-sm text-muted-foreground"},K={key:2,class:"text-sm text-muted-foreground"},M={key:3,class:"flex items-center gap-2 mt-2"},X={class:"text-right"},Z={class:"font-semibold"},ee=["onClick"],te={key:0,class:"flex justify-end"},se={key:1,class:"flex justify-end"},oe={key:1,class:"text-center text-muted-foreground"},ue=j({__name:"Index",props:{seo:{},items:{},total_qty:{},total_sum_cents:{}},setup(b){const{loadSummary:v,setSummary:w}=B(),y=b,m=g(y.items),$=g(y.total_qty),C=g(y.total_sum_cents);function p(r){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(r/100)}function q(){$.value=m.value.reduce((r,e)=>r+e.qty,0),C.value=m.value.reduce((r,e)=>r+e.line_total_cents,0)}function S(r){return r.calc_mode==="percent"?(r.value_percent??0)!==0:(r.value_cents??0)!==0}async function N(r){try{const{data:e}=await I.post("/cart/remove",{item_id:r.id});m.value=m.value.filter(t=>t.id!==r.id),q(),e?.summary?w(e.summary,{refreshWindow:!0}):await v({force:!0})}catch(e){console.error("removeItem failed",e),await v({force:!0})}}return(r,e)=>(o(),s(f,null,[n(U,{seo:y.seo},null,8,["seo"]),n(V,null,{default:d(()=>[u("section",Y,[n(i(F),null,{default:d(()=>[n(i(D),null,{default:d(()=>[n(i(k),null,{default:d(()=>[n(i(L),{href:r.route("home")},{default:d(()=>[...e[0]||(e[0]=[c("Home",-1)])]),_:1},8,["href"])]),_:1}),n(i(P)),n(i(k),null,{default:d(()=>[n(i(Q),null,{default:d(()=>[...e[1]||(e[1]=[c("Cart",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),e[6]||(e[6]=u("h1",{class:"text-3xl font-semibold my-6"},"Your Cart",-1)),m.value.length?(o(),s("div",A,[(o(!0),s(f,null,h(m.value,t=>(o(),s("div",{key:t.id,class:"flex items-center gap-4 border rounded-lg p-4"},[t.product.image_url?(o(),s("img",{key:0,src:t.product.image_url,alt:"",class:"w-20 h-20 object-cover rounded"},null,8,E)):_("",!0),u("div",G,[u("div",H,l(t.product.name),1),t.options&&t.options.length?(o(),s("div",O,[u("ul",R,[(o(!0),s(f,null,h(t.options,a=>(o(),s("li",{key:a.id},[a.is_ga?(o(),s("span",T," GA ")):_("",!0),u("span",W,l(a.title),1),S(a)?(o(),s("span",z,[e[2]||(e[2]=c(" ( ",-1)),a.calc_mode==="percent"?(o(),s(f,{key:0},[c(" +"+l(a.value_percent??0)+"% "+l(a.scope),1)],64)):(o(),s(f,{key:1},[c(l((a.value_cents??0)>=0?"+":"")+l(p(a.value_cents??0))+" "+l(a.scope),1)],64)),e[3]||(e[3]=c(" ) ",-1))])):_("",!0)]))),128))])])):_("",!0),t.range_labels&&t.range_labels.length?(o(),s("div",J,l(t.range_labels.join(", ")),1)):_("",!0),t.has_qty_slider?(o(),s("div",K,l(p(t.unit_price_cents))+" / each ",1)):_("",!0),t.has_qty_slider?(o(),s("div",M,[u("span",null,"Quantity: "+l(t.qty),1)])):_("",!0)]),u("div",X,[u("div",Z,l(p(t.line_total_cents)),1),u("button",{class:"text-sm text-red-500 mt-1",onClick:a=>N(t)},"Remove",8,ee)])]))),128)),r.$page.props.auth?.user?(o(),s("div",te,[n(i(x),{href:r.route("checkout.index"),class:"mt-3 px-4 py-2 bg-primary text-primary-foreground rounded-lg"},{default:d(()=>[...e[4]||(e[4]=[c(" Checkout ",-1)])]),_:1},8,["href"])])):(o(),s("div",se,[n(i(x),{href:r.route("login"),class:"mt-3 inline-block px-4 py-2 bg-primary text-primary-foreground rounded-lg"},{default:d(()=>[...e[5]||(e[5]=[c(" Login to checkout ",-1)])]),_:1},8,["href"])]))])):(o(),s("div",oe," Your cart is empty. "))])]),_:1})],64))}});export{ue as default};
