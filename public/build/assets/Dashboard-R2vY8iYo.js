import{c as N,U as V,_ as E}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-BTbjbBgZ.js";import{l as j,p as y,A as S,g as a,o as l,z as $,j as i,a as c,w as q,b as e,d as f,i as b,f as d,t as r,n as U,F as k,c as F,B as _}from"./app-KhPXK_eo.js";import{_ as M}from"./SeoHead.vue_vue_type_script_setup_true_lang-Dh5GiDDG.js";/**
 * @license lucide-vue-next v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=N("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-vue-next v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=N("unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]),H=j({__name:"TelegramLogin",props:{bot:{},authUrl:{},size:{},lang:{}},setup(h){const n=h,s=y(null);return S(()=>{if(!n.bot||!n.authUrl||!s.value)return;s.value.innerHTML="";const o=document.createElement("script");o.src="https://telegram.org/js/telegram-widget.js?22",o.async=!0,o.setAttribute("data-telegram-login",n.bot),o.setAttribute("data-size",n.size??"large"),o.setAttribute("data-userpic","false"),o.setAttribute("data-lang",n.lang??"en"),o.setAttribute("data-auth-url",n.authUrl),s.value.appendChild(o)}),(o,m)=>(l(),a("div",{ref_key:"root",ref:s},null,512))}}),P={class:"w-[90%] 2xl:w-[75%] mx-auto py-10 md:py-16 lg:py-20"},R={class:"flex gap-10 items-center"},G=["src"],J={key:1,class:"h-16 w-16 flex place-self-start items-center justify-center rounded-full bg-muted text-muted-foreground mt-2"},K={class:"flex flex-col gap-2"},O={key:0},Q={key:0,class:"text-green-600 font-semibold"},W={key:1,class:"flex flex-col gap-2"},X=["disabled"],Y={key:0,class:"ml-2 text-green-600 text-sm"},Z={class:"grid md:grid-cols-2 gap-6 mt-10"},ee={class:"rounded-2xl border p-5 bg-card text-card-foreground shadow-sm border-border"},te={class:"flex items-center justify-between mb-4"},se={class:"flex items-center gap-3"},le=["src"],ae={class:"text-sm text-muted-foreground mb-4 space-y-1"},oe={class:"ml-2"},ne={class:"flex items-center gap-2"},re={class:"font-mono"},ie={class:"flex gap-3"},de={key:1,class:"flex gap-3"},ue={class:"flex items-center justify-between mb-4"},ce={class:"mb-4 text-sm"},me={class:"font-medium"},pe={class:"text-xs text-muted-foreground"},ge={class:"font-mono"},ve={key:1,class:"flex items-center gap-3"},be=j({__name:"Dashboard",setup(h){const n=$(),s=i(()=>n.props.auth.user),o=i(()=>n.props.seo??{title:null,robots:null}),m=i(()=>!!s.value?.discord_user_id),w=i(()=>{const u=s.value;if(!u)return null;if(u.discord_avatar_url)return u.discord_avatar_url;const t=u.discord_user_id,v=u.discord_avatar||void 0;return t&&v?`https://cdn.discordapp.com/avatars/${t}/${v}.png?size=128`:null}),z=()=>{window.location.href=route("social.discord.redirect")},C=()=>{_.delete(route("social.discord.unlink"))},p=i(()=>!!s.value?.telegram_user_id),L=i(()=>n.props.social?.telegram_bot??""),A=i(()=>typeof route<"u"?route("social.telegram.callback"):"/auth/telegram/callback"),T=()=>{_.delete(route("social.telegram.unlink"),{},{onSuccess:()=>_.reload({only:["auth"]})})},g=y(!1),x=y(!1),B=()=>{g.value=!0,_.post(route("verification.send"),{},{onSuccess:()=>{x.value=!0,setTimeout(()=>x.value=!1,5e3)},onFinish:()=>{g.value=!1}})};return(u,t)=>(l(),a(k,null,[c(M,{seo:o.value??{}},null,8,["seo"]),c(E,null,{default:q(()=>[e("section",P,[t[13]||(t[13]=e("h1",{class:"text-3xl font-semibold mb-6"},"Dashboard",-1)),e("div",R,[s.value?.avatar_url?(l(),a("img",{key:0,src:s.value.avatar_url,alt:"User avatar",class:"h-16 w-16 place-self-start rounded-full object-cover mt-2",onError:t[0]||(t[0]=v=>v.target.src="")},null,40,G)):(l(),a("div",J,[c(f(V),{class:"h-8 w-8"})])),e("div",K,[e("p",null,[t[1]||(t[1]=e("span",{class:"font-semibold"},"Name:",-1)),d(" "+r(s.value?.name),1)]),e("p",null,[t[2]||(t[2]=e("span",{class:"font-semibold"},"Email:",-1)),d(" "+r(s.value?.email),1)]),s.value?.full_name?(l(),a("p",O,[t[3]||(t[3]=e("span",{class:"font-semibold"},"Full name:",-1)),d(" "+r(s.value.full_name),1)])):b("",!0),e("p",null,[s.value?.email_verified_at?(l(),a("span",Q,"Verified")):(l(),a("div",W,[t[4]||(t[4]=e("span",{class:"text-red-600 font-semibold"},"Not verified",-1)),e("button",{class:"px-3 py-1 rounded-md text-sm bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",onClick:B,disabled:g.value},r(g.value?"Sending...":"Resend verification email"),9,X),x.value?(l(),a("span",Y,"Email sent!")):b("",!0)]))])])]),e("div",Z,[e("div",ee,[e("div",te,[e("div",se,[m.value&&w.value?(l(),a("img",{key:0,src:w.value,class:"h-10 w-10 rounded-full object-cover",alt:"Discord avatar"},null,8,le)):b("",!0),t[5]||(t[5]=e("div",{class:"font-semibold text-lg"},"Discord",-1))]),e("span",{class:U([m.value?"text-green-600":"text-red-600","text-sm font-medium"])},r(m.value?"Linked":"Not linked"),3)]),m.value?(l(),a(k,{key:0},[e("div",ae,[e("div",null,[t[6]||(t[6]=e("span",{class:"text-foreground font-medium"},"Name:",-1)),e("span",oe,r(s.value?.discord_username??"â€”"),1)]),e("div",ne,[t[7]||(t[7]=e("span",{class:"text-foreground font-medium"},"ID:",-1)),e("span",re,r(s.value?.discord_user_id),1)])]),e("div",ie,[e("button",{class:"px-3 py-2 rounded-md bg-muted hover:bg-muted/70 inline-flex items-center gap-2",onClick:C},[c(f(D),{class:"w-4 h-4"}),t[8]||(t[8]=d(" Unlink ",-1))])])],64)):(l(),a("div",de,[e("button",{class:"px-3 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700 inline-flex items-center gap-2",onClick:z},[c(f(I),{class:"w-4 h-4"}),t[9]||(t[9]=d(" Link Discord ",-1))])]))]),(l(),a("div",{class:"rounded-2xl border p-5 bg-card text-card-foreground shadow-sm border-border",key:(p.value?"tg-linked":"tg-unlinked")+":"+(s.value?.telegram_user_id||"")},[e("div",ue,[t[10]||(t[10]=e("div",{class:"font-semibold text-lg"},"Telegram",-1)),e("span",{class:U([p.value?"text-green-600":"text-red-600","text-sm font-medium"])},r(p.value?"Linked":"Not linked"),3)]),p.value?(l(),a(k,{key:0},[e("div",ce,[e("div",me,r(s.value?.telegram_username?"@"+s.value.telegram_username:"No username"),1),e("div",pe,[t[11]||(t[11]=d(" ID: ",-1)),e("span",ge,r(s.value?.telegram_user_id),1)])]),e("button",{class:"px-3 py-2 rounded-md bg-muted hover:bg-muted/70 inline-flex items-center gap-2",onClick:T},[c(f(D),{class:"w-4 h-4"}),t[12]||(t[12]=d(" Unlink ",-1))])],64)):(l(),a("div",ve,[(l(),F(H,{key:"tg-login-"+(s.value?.telegram_user_id||"none"),bot:L.value,authUrl:A.value,size:"large"},null,8,["bot","authUrl"]))]))]))])])]),_:1})],64))}});export{be as default};
