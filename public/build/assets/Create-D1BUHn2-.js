import{i as le,d as se,e as re,P as B,g as oe,w as ue,f as de,h as j,j as $,k as X,l as O,m as ie,n as ne,R as fe,r as z,o as Z,b as M,p as pe,q as ce,a as T,_ as me}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-BTbjbBgZ.js";import{l as x,j as V,A as ve,M as ge,c as b,o as g,w as r,a as d,d as e,r as w,O as ye,i as k,P as S,L as be,e as _e,K as E,Q as qe,R as N,S as U,U as he,V as Ce,p as I,b as y,t as h,B as G,f as _,g as L,F as Ve,q as we,s as ke}from"./app-KhPXK_eo.js";import{i as K,u as Be,_ as Q,a as H,b as Y,c as Se,d as xe}from"./index-CAqP_Bf3.js";import{u as A}from"./VisuallyHidden-C-W1kQyG.js";import{V as D}from"./VisuallyHiddenInput-Dryc6IqD.js";import{i as Ie,C as $e}from"./ohash.D__AXeF1-BdDo5Poh.js";import{_ as J,b as W,a as Re}from"./CardHeader-yZoOQnQi.js";import{_ as P,a as Fe,c as Te,b as Ge}from"./index-NdYLHWRH.js";import"./index-FV2GQg2N.js";var Pe=x({__name:"RovingFocusItem",props:{tabStopId:{type:String,required:!1},focusable:{type:Boolean,required:!1,default:!0},active:{type:Boolean,required:!1},allowShiftKey:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(f){const i=f,a=le(),n=se(),c=V(()=>i.tabStopId||n),p=V(()=>a.currentTabStopId.value===c.value),{getItems:o,CollectionItem:u}=re();ve(()=>{i.focusable&&a.onFocusableItemAdd()}),ge(()=>{i.focusable&&a.onFocusableItemRemove()});function v(t){if(t.key==="Tab"&&t.shiftKey){a.onItemShiftTab();return}if(t.target!==t.currentTarget)return;const l=oe(t,a.orientation.value,a.dir.value);if(l!==void 0){if(t.metaKey||t.ctrlKey||t.altKey||!i.allowShiftKey&&t.shiftKey)return;t.preventDefault();let s=[...o().map(q=>q.ref).filter(q=>q.dataset.disabled!=="")];if(l==="last")s.reverse();else if(l==="prev"||l==="next"){l==="prev"&&s.reverse();const q=s.indexOf(t.currentTarget);s=a.loop.value?ue(s,q+1):s.slice(q+1)}ye(()=>de(s))}}return(t,l)=>(g(),b(e(u),null,{default:r(()=>[d(e(B),{tabindex:p.value?0:-1,"data-orientation":e(a).orientation.value,"data-active":t.active?"":void 0,"data-disabled":t.focusable?void 0:"",as:t.as,"as-child":t.asChild,onMousedown:l[0]||(l[0]=s=>{t.focusable?e(a).onItemFocus(c.value):s.preventDefault()}),onFocus:l[1]||(l[1]=s=>e(a).onItemFocus(c.value)),onKeydown:v},{default:r(()=>[w(t.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}}),ee=Pe;const[Ke,wa]=j("CheckboxGroupRoot");function F(f){return f==="indeterminate"}function ae(f){return F(f)?"indeterminate":f?"checked":"unchecked"}const[je,ze]=j("CheckboxRoot");var Me=x({inheritAttrs:!1,__name:"CheckboxRoot",props:{defaultValue:{type:[Boolean,String],required:!1},modelValue:{type:[Boolean,String,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},value:{type:null,required:!1,default:"on"},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(f,{emit:i}){const a=f,n=i,{forwardRef:c,currentElement:p}=$(),o=Ke(null),u=X(a,"modelValue",n,{defaultValue:a.defaultValue,passive:a.modelValue===void 0}),v=V(()=>o?.disabled.value||a.disabled),t=V(()=>O(o?.modelValue.value)?u.value==="indeterminate"?"indeterminate":u.value:K(o.modelValue.value,a.value));function l(){if(O(o?.modelValue.value))u.value=F(u.value)?!0:!u.value;else{const m=[...o.modelValue.value||[]];if(K(m,a.value)){const R=m.findIndex(C=>Ie(C,a.value));m.splice(R,1)}else m.push(a.value);o.modelValue.value=m}}const s=A(p),q=V(()=>a.id&&p.value?document.querySelector(`[for="${a.id}"]`)?.innerText:void 0);return ze({disabled:v,state:t}),(m,R)=>(g(),b(E(e(o)?.rovingFocus.value?e(ee):e(B)),S(m.$attrs,{id:m.id,ref:e(c),role:"checkbox","as-child":m.asChild,as:m.as,type:m.as==="button"?"button":void 0,"aria-checked":e(F)(t.value)?"mixed":t.value,"aria-required":m.required,"aria-label":m.$attrs["aria-label"]||q.value,"data-state":e(ae)(t.value),"data-disabled":v.value?"":void 0,disabled:v.value,focusable:e(o)?.rovingFocus.value?!v.value:void 0,onKeydown:be(_e(()=>{},["prevent"]),["enter"]),onClick:l}),{default:r(()=>[w(m.$slots,"default",{modelValue:e(u),state:t.value}),e(s)&&m.name&&!e(o)?(g(),b(e(D),{key:0,type:"checkbox",checked:!!t.value,name:m.name,value:m.value,disabled:v.value,required:m.required},null,8,["checked","name","value","disabled","required"])):k("v-if",!0)]),_:3},16,["id","as-child","as","type","aria-checked","aria-required","aria-label","data-state","data-disabled","disabled","focusable","onKeydown"]))}}),Ee=Me,Ne=x({__name:"CheckboxIndicator",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(f){const{forwardRef:i}=$(),a=je();return(n,c)=>(g(),b(e(ie),{present:n.forceMount||e(F)(e(a).state.value)||e(a).state.value===!0},{default:r(()=>[d(e(B),S({ref:e(i),"data-state":e(ae)(e(a).state.value),"data-disabled":e(a).disabled.value?"":void 0,style:{pointerEvents:"none"},"as-child":n.asChild,as:n.as},n.$attrs),{default:r(()=>[w(n.$slots,"default")]),_:3},16,["data-state","data-disabled","as-child","as"])]),_:3},8,["present"]))}}),Ue=Ne;const[te,Ae]=j("ToggleGroupRoot");var De=x({__name:"ToggleGroupRoot",props:{rovingFocus:{type:Boolean,required:!1,default:!0},disabled:{type:Boolean,required:!1,default:!1},orientation:{type:String,required:!1},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1},type:{type:String,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1}},emits:["update:modelValue"],setup(f,{emit:i}){const a=f,n=i,{loop:c,rovingFocus:p,disabled:o,dir:u}=qe(a),v=ne(u),{forwardRef:t,currentElement:l}=$(),{modelValue:s,changeModelValue:q,isSingle:m}=Be(a,n),R=A(l);return Ae({isSingle:m,modelValue:s,changeModelValue:q,dir:v,orientation:a.orientation,loop:c,rovingFocus:p,disabled:o}),(C,ma)=>(g(),b(E(e(p)?e(fe):e(B)),{"as-child":"",orientation:e(p)?C.orientation:void 0,dir:e(v),loop:e(p)?e(c):void 0},{default:r(()=>[d(e(B),{ref:e(t),role:"group","as-child":C.asChild,as:C.as},{default:r(()=>[w(C.$slots,"default",{modelValue:e(s)}),e(R)&&C.name?(g(),b(D,{key:0,name:C.name,required:C.required,value:e(s)},null,8,["name","required","value"])):k("v-if",!0)]),_:3},8,["as-child","as"])]),_:3},8,["orientation","dir","loop"]))}}),Oe=De,Le=x({__name:"Toggle",props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(f,{emit:i}){const a=f,n=i,{forwardRef:c,currentElement:p}=$(),o=te(null),u=X(a,"modelValue",n,{defaultValue:a.defaultValue,passive:a.modelValue===void 0});function v(){u.value=!u.value}const t=V(()=>u.value?"on":"off"),l=A(p);return(s,q)=>(g(),b(e(B),{ref:e(c),type:s.as==="button"?"button":void 0,"as-child":a.asChild,as:s.as,"aria-pressed":e(u),"data-state":t.value,"data-disabled":s.disabled?"":void 0,disabled:s.disabled,onClick:v},{default:r(()=>[w(s.$slots,"default",{modelValue:e(u),disabled:s.disabled,pressed:e(u),state:t.value}),e(l)&&s.name&&!e(o)?(g(),b(D,{key:0,type:"checkbox",name:s.name,value:e(u),required:s.required},null,8,["name","value","required"])):k("v-if",!0)]),_:3},8,["type","as-child","as","aria-pressed","data-state","data-disabled","disabled"]))}}),Qe=Le,He=x({__name:"ToggleGroupItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(f){const i=f,a=te(),n=V(()=>a.disabled?.value||i.disabled),c=V(()=>K(a.modelValue.value,i.value)),{forwardRef:p}=$();return(o,u)=>(g(),b(E(e(a).rovingFocus.value?e(ee):e(B)),S({"as-child":""},e(a).rovingFocus.value?{focusable:!n.value,active:c.value}:{}),{default:r(()=>[d(e(Qe),S(i,{ref:e(p),disabled:n.value,"model-value":c.value,"onUpdate:modelValue":u[0]||(u[0]=v=>e(a).changeModelValue(o.value))}),{default:r(v=>[w(o.$slots,"default",N(U(v)))]),_:3},16,["disabled","model-value"])]),_:3},16))}}),Ye=He;const Je={__name:"Checkbox",props:{defaultValue:{type:[Boolean,String],required:!1},modelValue:{type:[Boolean,String,null],required:!1},disabled:{type:Boolean,required:!1},value:{type:null,required:!1},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1},class:{type:null,required:!1}},emits:["update:modelValue"],setup(f,{emit:i}){const a=f,n=i,c=z(a,"class"),p=Z(c,n);return(o,u)=>(g(),b(e(Ee),S(e(p),{class:e(M)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a.class)}),{default:r(()=>[d(e(Ue),{class:"flex h-full w-full items-center justify-center text-current"},{default:r(()=>[w(o.$slots,"default",{},()=>[d(e($e),{class:"h-4 w-4"})])]),_:3})]),_:3},16,["class"]))}},We={__name:"ToggleGroup",props:{rovingFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},orientation:{type:String,required:!1},dir:{type:String,required:!1},loop:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1},type:{type:String,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},class:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1}},emits:["update:modelValue"],setup(f,{emit:i}){const a=f,n=i;he("toggleGroup",{variant:a.variant,size:a.size});const c=z(a,"class"),p=Z(c,n);return(o,u)=>(g(),b(e(Oe),S(e(p),{class:e(M)("flex items-center justify-center gap-1",a.class)}),{default:r(v=>[w(o.$slots,"default",N(U(v)))]),_:3},16,["class"]))}},Xe=pe("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ze={__name:"ToggleGroupItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1}},setup(f){const i=f,a=Ce("toggleGroup"),n=z(i,"class","size","variant"),c=ce(n);return(p,o)=>(g(),b(e(Ye),S(e(c),{class:e(M)(e(Xe)({variant:e(a)?.variant||f.variant,size:e(a)?.size||f.size}),i.class)}),{default:r(u=>[w(p.$slots,"default",N(U(u)))]),_:3},16,["class"]))}},ea={class:"w-[90%] 2xl:w-[75%] mx-auto py-8"},aa={class:"flex items-start justify-between gap-4 mb-6"},ta={class:"text-sm text-muted-foreground mt-1"},la={class:"flex items-center gap-3"},sa={class:"flex-1 min-w-0"},ra={class:"font-medium truncate"},oa={class:"text-xs text-muted-foreground"},ua={key:0,class:"hidden sm:flex items-center gap-2 text-xs text-muted-foreground"},da={class:"max-w-[220px] truncate"},ia={class:"space-y-2"},na={class:"text-xs text-muted-foreground"},fa={class:"space-y-2"},pa={class:"flex items-center gap-2"},ca={class:"flex gap-2"},ka=x({__name:"Create",props:{orderId:{},item:{},game:{}},setup(f){const i=f,a=I(5),n=I(""),c=I(!1),p=I(!1),o=I(null),u=V({get:()=>String(a.value),set:t=>{const l=Number(t);Number.isFinite(l)&&l>=1&&l<=5&&(a.value=l)}});async function v(){if(!p.value){o.value=null,p.value=!0;try{await ke.post(route("reviews.store",{order:i.orderId,item:i.item.id}),{rating:a.value,body:n.value,is_anonymous:c.value}),G.visit(route("orders.show",i.orderId))}catch(t){o.value=t?.response?.data?.message??"Failed to submit review",p.value=!1}}}return(t,l)=>(g(),b(me,null,{default:r(()=>[y("section",ea,[y("div",aa,[y("div",null,[l[5]||(l[5]=y("h1",{class:"text-3xl font-semibold"},"Leave a review",-1)),y("div",ta," Order #"+h(t.orderId)+" · Item #"+h(t.item.id),1)]),d(e(T),{variant:"secondary",onClick:l[0]||(l[0]=s=>e(G).visit(t.route("orders.show",t.orderId)))},{default:r(()=>[...l[6]||(l[6]=[_(" Back to order ",-1)])]),_:1})]),d(e(J),{class:"mb-6"},{default:r(()=>[d(e(W),{class:"pt-6"},{default:r(()=>[y("div",la,[d(e(Q),{class:"h-12 w-12 rounded-lg"},{default:r(()=>[t.item.product_image_url?(g(),b(e(H),{key:0,src:t.item.product_image_url,alt:t.item.product_name},null,8,["src","alt"])):k("",!0),d(e(Y),{class:"rounded-lg"},{default:r(()=>[_(h((t.item.product_name||"P").slice(0,1).toUpperCase()),1)]),_:1})]),_:1}),y("div",sa,[y("div",ra,h(t.item.product_name),1),y("div",oa,"Qty: "+h(t.item.qty),1)]),t.game?(g(),L("div",ua,[d(e(Q),{class:"h-6 w-6"},{default:r(()=>[t.game.image_url?(g(),b(e(H),{key:0,src:t.game.image_url,alt:t.game.name},null,8,["src","alt"])):k("",!0),d(e(Y),null,{default:r(()=>[_(h((t.game.name||"G").slice(0,1).toUpperCase()),1)]),_:1})]),_:1}),y("span",da,h(t.game.name),1)])):k("",!0)])]),_:1})]),_:1}),d(e(J),null,{default:r(()=>[d(e(Re),null,{default:r(()=>[d(e(Se),null,{default:r(()=>[...l[7]||(l[7]=[_("Review",-1)])]),_:1}),d(e(xe),null,{default:r(()=>[...l[8]||(l[8]=[_("Reviews are published after moderation.",-1)])]),_:1})]),_:1}),d(e(W),{class:"space-y-5"},{default:r(()=>[y("div",ia,[d(e(P),null,{default:r(()=>[...l[9]||(l[9]=[_("Rating",-1)])]),_:1}),d(e(We),{modelValue:u.value,"onUpdate:modelValue":l[1]||(l[1]=s=>u.value=s),type:"single",class:"justify-start"},{default:r(()=>[(g(),L(Ve,null,we(5,s=>d(e(Ze),{key:s,value:String(s),class:"h-9 w-9 px-0 border data-[state=on]:bg-primary data-[state=on]:text-primary-foreground data-[state=on]:border-primary"},{default:r(()=>[_(h(s),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),y("div",na,"Selected: "+h(a.value)+"/5",1)]),y("div",fa,[d(e(P),{for:"review-body"},{default:r(()=>[...l[10]||(l[10]=[_("Your review",-1)])]),_:1}),d(e(Fe),{id:"review-body",modelValue:n.value,"onUpdate:modelValue":l[2]||(l[2]=s=>n.value=s),rows:"6",placeholder:"Tell others about your experience…"},null,8,["modelValue"])]),y("div",pa,[d(e(Je),{id:"anonymous",modelValue:c.value,"onUpdate:modelValue":l[3]||(l[3]=s=>c.value=s)},null,8,["modelValue"]),d(e(P),{for:"anonymous"},{default:r(()=>[...l[11]||(l[11]=[_("Post anonymously",-1)])]),_:1})]),l[13]||(l[13]=y("div",{class:"text-xs text-muted-foreground"}," If enabled, your name and avatar won’t be shown publicly. ",-1)),o.value?(g(),b(e(Te),{key:0,variant:"destructive"},{default:r(()=>[d(e(Ge),null,{default:r(()=>[_(h(o.value),1)]),_:1})]),_:1})):k("",!0),y("div",ca,[d(e(T),{disabled:p.value,onClick:v},{default:r(()=>[_(h(p.value?"Submitting…":"Submit review"),1)]),_:1},8,["disabled"]),d(e(T),{variant:"secondary",onClick:l[4]||(l[4]=s=>e(G).visit(t.route("orders.show",t.orderId)))},{default:r(()=>[...l[12]||(l[12]=[_(" Cancel ",-1)])]),_:1})])]),_:1})]),_:1})])]),_:1}))}});export{ka as default};
